# 前端UI接口定义

- type: Frontend
  id: UI-LoginPage
  description: 完整的登录页面组件，包含账号密码登录和验证码登录两种模式
  properties:
    - name: onLoginSuccess
      type: function
      description: "登录成功后的回调函数"
  state:
    - loginType
    - account
    - password
    - phoneNumber
    - verificationCode
    - agreeToTerms
    - isLoading
    - errors
    - countdown
  dependencies:
    - API-POST-Login
    - API-POST-SendVerificationCode
    - API-POST-LoginWithCode
  acceptanceCriteria:
    - 组件应渲染登录方式切换Tab（账号密码登录和验证码登录）
    - 账号密码登录模式下应显示账号输入框、密码输入框、忘记密码链接、登录按钮
    - 验证码登录模式下应显示手机号输入框、发送验证码按钮、验证码输入框、登录按钮
    - 两种模式下都应显示服务协议复选框和免费注册链接
    - 点击登录按钮时应调用相应的API接口
    - 当isLoading状态为true时，登录按钮应被禁用
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-RegisterPage
  description: 完整的注册页面组件，包含两步注册流程
  properties:
    - name: onRegisterSuccess
      type: function
      description: "注册成功后的回调函数"
  state:
    - currentStep
    - phoneNumber
    - verificationCode
    - password
    - confirmPassword
    - passwordStrength
    - showPassword
    - showConfirmPassword
    - isLoading
    - errors
    - countdown
    - tempToken
    - maskedPhone
  dependencies:
    - API-POST-SendVerificationCode
    - API-POST-RegisterStep1
    - API-POST-RegisterStep2
  acceptanceCriteria:
    - 步骤1应显示手机号输入框、发送验证码按钮、验证码输入框、下一步按钮
    - 步骤2应显示手机号显示栏、密码输入框、密码强度提示、确认密码输入框、密码可视化切换按钮、完成按钮
    - 密码强度提示应根据密码复杂度显示弱、中、强三个级别
    - 点击发送验证码按钮时应调用API并显示倒计时
    - 点击下一步按钮时应验证手机号和验证码
    - 点击完成按钮时应创建用户账户
    - 当isLoading状态为true时，相关按钮应被禁用
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-LoginForm
  description: 账号密码登录表单组件
  properties:
    - name: onSubmit
      type: function
      description: "表单提交回调函数"
    - name: onSwitchToCodeLogin
      type: function
      description: "切换到验证码登录的回调函数"
  state:
    - account
    - password
    - agreeToTerms
    - errors
    - isLoading
  dependencies:
    - none
  acceptanceCriteria:
    - 组件应渲染账号输入框（支持手机号/邮箱/用户名）
    - 组件应渲染密码输入框（密文显示）
    - 组件应渲染服务协议复选框
    - 组件应渲染忘记密码链接和免费注册链接
    - 组件应渲染登录按钮
    - 表单验证应在提交时进行
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-CodeLoginForm
  description: 验证码登录表单组件
  properties:
    - name: onSubmit
      type: function
      description: "表单提交回调函数"
    - name: onSwitchToAccountLogin
      type: function
      description: "切换到账号密码登录的回调函数"
  state:
    - phoneNumber
    - verificationCode
    - agreeToTerms
    - errors
    - isLoading
    - countdown
  dependencies:
    - API-POST-SendVerificationCode
  acceptanceCriteria:
    - 组件应渲染手机号输入框
    - 组件应渲染发送验证码按钮（带倒计时功能）
    - 组件应渲染验证码输入框
    - 组件应渲染服务协议复选框
    - 组件应渲染登录按钮
    - 手机号格式验证应在发送验证码前进行
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-RegisterStep1
  description: 注册第一步组件 - 验证手机
  properties:
    - name: onNext
      type: function
      description: "下一步回调函数"
  state:
    - phoneNumber
    - verificationCode
    - errors
    - isLoading
    - countdown
  dependencies:
    - API-POST-SendVerificationCode
  acceptanceCriteria:
    - 组件应渲染手机号输入框
    - 组件应渲染发送验证码按钮（带倒计时功能）
    - 组件应渲染验证码输入框
    - 组件应渲染下一步按钮
    - 手机号和验证码验证应在点击下一步时进行
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-RegisterStep2
  description: 注册第二步组件 - 设置密码
  properties:
    - name: onComplete
      type: function
      description: "完成注册回调函数"
    - name: maskedPhone
      type: string
      description: "掩码显示的手机号"
  state:
    - password
    - confirmPassword
    - passwordStrength
    - showPassword
    - showConfirmPassword
    - errors
    - isLoading
  dependencies:
    - none
  acceptanceCriteria:
    - 组件应渲染掩码显示的手机号
    - 组件应渲染密码输入框
    - 组件应渲染密码强度提示（弱/中/强）
    - 组件应渲染确认密码输入框
    - 组件应渲染密码可视化切换按钮
    - 组件应渲染完成按钮和返回上一步按钮
    - 密码强度应实时计算并显示
    - 两次密码一致性验证应在提交时进行
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-OrderListPage
  description: 个人订单管理列表页面，展示不同状态的订单。
  properties:
    - name: onSelectOrder
      type: function
      description: "选中一个订单后的回调，通常用于跳转详情页。"
  state:
    - orders
    - currentTab
    - pagination
    - isLoading
    - error
  dependencies:
    - API-GET-Orders
  acceptanceCriteria:
    - 组件应渲染导航标签栏（全部、待出行等）。
    - 组件应能根据当前标签调用API-GET-Orders获取数据。
    - 列表区域应能渲染订单卡片（UI-OrderCard）。
    - 应处理加载、空状态和错误状态的显示。
  changeLog:
    - date: "2025-11-15"
      description: "初始创建。"

- type: Frontend
  id: UI-OrderDetailPage
  description: 订单详情页面，展示订单的完整信息和可执行操作。
  properties:
    - name: orderId
      type: string
      description: "要展示的订单ID。"
  state:
    - orderDetails
    - isLoading
    - error
  dependencies:
    - API-GET-OrderById
    - API-POST-CancelOrder
    - UI-CancelOrderModal
    - UI-ReorderButton
    - UI-DownloadButton
  acceptanceCriteria:
    - 组件应根据orderId调用API-GET-OrderById获取数据。
    - 应能正确渲染产品、旅客、价格等所有信息。
    - 根据订单状态动态显示“取消订单”、“重新下单”等操作按钮。
  changeLog:
    - date: "2025-11-15"
      description: "初始创建。"

- type: Frontend
  id: UI-CancelOrderModal
  description: 取消订单的确认弹窗。
  properties:
    - name: onConfirm
      type: function
      description: "确认取消的回调。"
    - name: onCancel
      type: function
      description: "关闭弹窗的回调。"
  state:
    - isVisible
    - isLoading
  dependencies:
    - API-POST-CancelOrder
  acceptanceCriteria:
    - 弹窗应包含明确的提示信息和操作按钮。
    - 点击确认后，应调用onConfirm并显示加载状态。
  changeLog:
    - date: "2025-11-15"
      description: "初始创建。"

- type: Frontend
  id: UI-ReorderButton
  description: “重新下单”按钮，用于从已取消订单跳转到预订流程。
  properties:
    - name: orderInfo
      type: object
      description: "旧订单信息，用于预填。"
  state:
    - none
  dependencies:
    - none
  acceptanceCriteria:
    - 点击后，应能携带旧订单信息跳转到搜索或预订页面。
  changeLog:
    - date: "2025-11-15"
      description: "初始创建。"

- type: Frontend
  id: UI-DownloadButton
  description: 用于下载订单相关文档（如PDF行程单）的按钮。
  properties:
    - name: orderId
      type: string
      description: "要下载的订单ID。"
  state:
    - isLoading
  dependencies:
    - API-GET-OrderAsPdf
  acceptanceCriteria:
    - 点击后，应调用API-GET-OrderAsPdf并触发浏览器下载。
  changeLog:
    - date: "2025-11-15"
      description: "初始创建。"