# 前端UI接口定义

- type: Frontend
  id: UI-LoginPage
  description: 完整的登录页面组件，包含账号密码登录和验证码登录两种模式
  properties:
    - name: onLoginSuccess
      type: function
      description: "登录成功后的回调函数"
  state:
    - loginType
    - account
    - password
    - phoneNumber
    - verificationCode
    - agreeToTerms
    - isLoading
    - errors
    - countdown
  dependencies:
    - API-POST-Login
    - API-POST-SendVerificationCode
    - API-POST-LoginWithCode
  acceptanceCriteria:
    - 组件应渲染登录方式切换Tab（账号密码登录和验证码登录）
    - 账号密码登录模式下应显示账号输入框、密码输入框、忘记密码链接、登录按钮
    - 验证码登录模式下应显示手机号输入框、发送验证码按钮、验证码输入框、登录按钮
    - 两种模式下都应显示服务协议复选框和免费注册链接
    - 点击登录按钮时应调用相应的API接口
    - 当isLoading状态为true时，登录按钮应被禁用
    - 登录成功后应通过onLoginSuccess导航至机票首页（/home）
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"
    - date: "2025-11-15"
      description: "补充登录成功后导航至机票首页"

- type: Frontend
  id: UI-RegisterPage
  description: 完整的注册页面组件，包含两步注册流程
  properties:
    - name: onRegisterSuccess
      type: function
      description: "注册成功后的回调函数"
  state:
    - currentStep
    - phoneNumber
    - verificationCode
    - password
    - confirmPassword
    - passwordStrength
    - showPassword
    - showConfirmPassword
    - isLoading
    - errors
    - countdown
    - tempToken
    - maskedPhone
  dependencies:
    - API-POST-SendVerificationCode
    - API-POST-RegisterStep1
    - API-POST-RegisterStep2
  acceptanceCriteria:
    - 步骤1应显示手机号输入框、发送验证码按钮、验证码输入框、下一步按钮
    - 步骤2应显示手机号显示栏、密码输入框、密码强度提示、确认密码输入框、密码可视化切换按钮、完成按钮
    - 密码强度提示应根据密码复杂度显示弱、中、强三个级别
    - 点击发送验证码按钮时应调用API并显示倒计时
    - 点击下一步按钮时应验证手机号和验证码
    - 点击完成按钮时应创建用户账户
    - 当isLoading状态为true时，相关按钮应被禁用
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

 

- type: Frontend
  id: UI-FlightsSearchCard
  description: 国内机票首页搜索卡组件（单程/往返/多程）
  properties:
    - name: onSearch
      type: function
      description: "提交搜索条件的回调"
  state:
    - tripType
    - fromCity
    - toCity
    - departDate
    - returnDate
    - adults
    - children
    - infants
    - cabin
    - directOnly
    - suggestions
    - isLoading
    - errors
  dependencies:
    - API-GET-AirportSuggest
    - API-GET-FlightsSearch
  acceptanceCriteria:
    - 渲染单程/往返/多程切换与出发/目的地输入框（支持交换）
    - 渲染日期选择器与人数/舱位选择器、直飞筛选
    - 输入联想调用机场联想接口；点击搜索调用航班搜索接口
    - 非法输入时显示错误提示并阻止提交
  changeLog:
    - date: "2025-11-15"
      description: "新增：机票首页搜索卡UI接口"

- type: Frontend
  id: UI-HomePage
  description: 携程首页容器（登录后默认展示机票入口）
  properties:
    - name: onNavigate
      type: function
      description: "导航回调"
  state:
    - none
  dependencies:
    - UI-FlightsSearchCard
  acceptanceCriteria:
    - 页面右侧展示FlightsSearchCard，左侧展示PromotionBanner与QuickLink
    - 登录后从登录页跳转到此页
  changeLog:
    - date: "2025-11-15"
      description: "新增：首页容器UI依赖FlightsSearchCard"

- type: Frontend
  id: UI-FlightsResultsPage
  description: 航班搜索结果页组件
  properties:
    - name: onBook
      type: function
      description: "点击预订回调"
  state:
    - filters
    - sortKey
    - results
    - isLoading
    - errors
  dependencies:
    - API-GET-FlightsSearch
    - API-GET-FlightDetails
  acceptanceCriteria:
    - 展示条件汇总条、快速筛选与排序
    - 列出航班卡片，支持查看详情与选择套餐
    - 点击预订进入订单填写页（未登录时要求登录）
  changeLog:
    - date: "2025-11-15"
      description: "新增：航班搜索结果页UI接口"

- type: Frontend
  id: UI-OrderPage
  description: 订单填写页组件（乘机人与联系人）
  properties:
    - name: onSubmit
      type: function
      description: "提交订单回调"
  state:
    - passengers
    - contact
    - invoice
    - summary
    - isLoading
    - errors
  dependencies:
    - API-POST-CreateOrder
    - API-GET-Order
  acceptanceCriteria:
    - 支持添加乘机人、联系人、发票选项，展示航班与价格摘要
    - 提交时校验库存与价格，成功后跳转支付页
  changeLog:
    - date: "2025-11-15"
      description: "新增：订单填写页UI接口"

- type: Frontend
  id: UI-PaymentPage
  description: 支付页组件
  properties:
    - name: onPay
      type: function
      description: "触发支付回调"
  state:
    - methods
    - countdown
    - amount
    - isLoading
    - errors
  dependencies:
    - API-POST-PayOrder
    - API-GET-OrderStatus
  acceptanceCriteria:
    - 展示订单号与应付金额，提供支付方式选择与倒计时
    - 发起支付并轮询订单状态，成功后进入出票/确认页
  changeLog:
    - date: "2025-11-15"
      description: "新增：支付页UI接口"

- type: Frontend
  id: UI-TicketConfirmPage
  description: 出票与确认页组件
  properties:
    - name: onAfterSale
      type: function
      description: "售后入口回调"
  state:
    - ticket
    - status
    - itinerary
    - isLoading
    - errors
  dependencies:
    - API-GET-Ticket
  acceptanceCriteria:
    - 支持展示电子客票号与行程信息，提供售后入口
  changeLog:
    - date: "2025-11-15"
      description: "新增：出票确认页UI接口"

- type: Frontend
  id: UI-MyOrdersPage
  description: 我的订单列表与详情入口
  properties:
    - name: onView
      type: function
      description: "查看订单详情回调"
  state:
    - items
    - pagination
    - isLoading
    - errors
  dependencies:
    - API-GET-Orders
  acceptanceCriteria:
    - 展示订单列表与分页，支持查看详情与再次预订
  changeLog:
    - date: "2025-11-15"
      description: "新增：我的订单页UI接口"

- type: Frontend
  id: UI-LoginForm
  description: 账号密码登录表单组件
  properties:
    - name: onSubmit
      type: function
      description: "表单提交回调函数"
    - name: onSwitchToCodeLogin
      type: function
      description: "切换到验证码登录的回调函数"
  state:
    - account
    - password
    - agreeToTerms
    - errors
    - isLoading
  dependencies:
    - none
  acceptanceCriteria:
    - 组件应渲染账号输入框（支持手机号/邮箱/用户名）
    - 组件应渲染密码输入框（密文显示）
    - 组件应渲染服务协议复选框
    - 组件应渲染忘记密码链接和免费注册链接
    - 组件应渲染登录按钮
    - 表单验证应在提交时进行
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-CodeLoginForm
  description: 验证码登录表单组件
  properties:
    - name: onSubmit
      type: function
      description: "表单提交回调函数"
    - name: onSwitchToAccountLogin
      type: function
      description: "切换到账号密码登录的回调函数"
  state:
    - phoneNumber
    - verificationCode
    - agreeToTerms
    - errors
    - isLoading
    - countdown
  dependencies:
    - API-POST-SendVerificationCode
  acceptanceCriteria:
    - 组件应渲染手机号输入框
    - 组件应渲染发送验证码按钮（带倒计时功能）
    - 组件应渲染验证码输入框
    - 组件应渲染服务协议复选框
    - 组件应渲染登录按钮
    - 手机号格式验证应在发送验证码前进行
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-RegisterStep1
  description: 注册第一步组件 - 验证手机
  properties:
    - name: onNext
      type: function
      description: "下一步回调函数"
  state:
    - phoneNumber
    - verificationCode
    - errors
    - isLoading
    - countdown
  dependencies:
    - API-POST-SendVerificationCode
  acceptanceCriteria:
    - 组件应渲染手机号输入框
    - 组件应渲染发送验证码按钮（带倒计时功能）
    - 组件应渲染验证码输入框
    - 组件应渲染下一步按钮
    - 手机号和验证码验证应在点击下一步时进行
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"

- type: Frontend
  id: UI-RegisterStep2
  description: 注册第二步组件 - 设置密码
  properties:
    - name: onComplete
      type: function
      description: "完成注册回调函数"
    - name: maskedPhone
      type: string
      description: "掩码显示的手机号"
  state:
    - password
    - confirmPassword
    - passwordStrength
    - showPassword
    - showConfirmPassword
    - errors
    - isLoading
  dependencies:
    - none
  acceptanceCriteria:
    - 组件应渲染掩码显示的手机号
    - 组件应渲染密码输入框
    - 组件应渲染密码强度提示（弱/中/强）
    - 组件应渲染确认密码输入框
    - 组件应渲染密码可视化切换按钮
    - 组件应渲染完成按钮和返回上一步按钮
    - 密码强度应实时计算并显示
    - 两次密码一致性验证应在提交时进行
  changeLog:
    - date: "2025-11-11"
      description: "初始创建"