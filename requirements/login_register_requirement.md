# 携程旅行网 - 登录与注册模块需求文档

## 1. 登录模块

### 1.1 账号密码登录

#### 1.1.1 进入方式
- 用户通过浏览器输入网址直接进入登录页面。
- 用户在首页点击“登录”按钮，也会跳转至登录页面。
- 用户在验证码登录Tab 内，点击切换到“账号登录”按钮。
- 在网站其他需要登录才能操作的页面，若用户未登录，系统会自动跳转至该登录页面。

#### 1.1.2 页面元素
- **登录方式切换**：Tab 形式，包含“账号密码登录”和“验证码登录”，默认为“账号密码登录”。
- **账号输入框**：支持手机号/邮箱/用户名。
- **密码输入框**：密码以密文形式显示。
- **“忘记密码”链接**：点击后跳转至找回密码流程页面。
- **“登录”按钮**：用于提交登录信息。
- **“免费注册”链接**：点击后跳转至注册页面。
- **第三方登录区域**：包含微信、QQ、支付宝、新浪微博、百度等图标链接。
- **服务协议复选框**：“阅读并同意携程的服务协议和个人信息保护政策”，默认为非勾选状态。

---

#### **场景描述 (Gherkin)**

**Scenario: 1.1.3 用户使用有效的账号和密码成功登录**
    Given 用户已打开登录页面
    And 用户已输入注册过的手机号
    And 用户已输入对应的正确密码
    And “服务协议”复选框已被勾选
    When 用户点击“登录”按钮
    Then 系统验证账号和密码匹配
    And 页面跳转至携程首页

**Scenario: 1.1.4 用户使用无效的账号或密码登录失败**
    Given 用户已打开登录页面
    And 用户已输入未注册的手机号
    And 用户已输入任意密码
    And “服务协议”复选框已被勾选
    When 用户点击“登录”按钮
    Then 系统验证账号和密码不匹配
    And 在页面上显示错误提示信息：“用户名或密码不正确”
    And 页面停留在登录页

**Scenario: 1.1.5 用户未输入账号点击登录**
    Given 用户已打开登录页面
    And 用户未输入账号
    When 用户点击“登录”按钮
    Then 系统在账号输入框下方显示错误提示：“请输入用户名”
    And 页面停留在登录页

**Scenario: 1.1.6 用户未输入密码点击登录**
    Given 用户已打开登录页面
    And 用户已输入任意账号
    And 用户未输入密码
    When 用户点击“登录”按钮
    Then 系统在密码输入框下方显示错误提示：“请输入密码”
    And 页面停留在登录页

**Scenario: 1.1.7 用户未勾选服务协议点击登录**
    Given 用户已打开登录页面
    And 用户已输入任意非空的账号和密码
    And 用户未勾选“服务协议”复选框
    When 用户点击“登录”按钮
    Then 系统在复选框上方显示提示信息：“请阅读并同意服务协议”
    And 页面停留在登录页


### 1.2 手机验证码登录

#### 1.2.1 进入方式
- 在“账号密码登录”Tab 内，点击切换到“验证码登录”按钮。

#### 1.2.2 页面元素
- **手机号输入框**：仅支持输入手机号码。
- **“发送验证码”按钮**：点击后向输入的手机号发送短信验证码。
- **验证码输入框**：用于输入收到的6位数字验证码。
- **“登录”按钮**：用于提交手机号和验证码进行登录。
- **服务协议复选框**：同账号密码登录。
- **账号登录**：点击后跳转至账号密码登录页面。

---

#### **场景描述 (Gherkin)**

**Scenario: 1.2.3 用户使用有效的手机号和验证码成功登录**
    Given 用户已切换到验证码登录方式
    And 用户已输入注册过的手机号
    When 用户点击“发送验证码”按钮
    Then 系统向该手机号发送一条包含6位数字验证码的短信
    And “获取验证码”按钮变为不可点状态，并开始60秒倒计时
    And 用户在验证码输入框中输入了正确的验证码
    When 用户点击“登录”按钮
    Then 系统验证手机号和验证码匹配
    And 页面跳转至携程首页或之前的页面

**Scenario: 1.2.4 用户输入的手机号不合法**
    Given 用户已切换到验证码登录方式
    And 用户输入了一个不合法的手机号，如123
    When 用户点击“发送验证码”按钮
    Then 验证码输入框和登录按钮中间弹出错误提示：手机号格式不正确，请重新输入
    And 页面停留在登录页

**Scenario: 1.2.4 用户输入错误的验证码**
    Given 用户已收到手机验证码
    And 用户在验证码输入框中输入了错误的验证码
    And 用户已勾选“服务协议”复选框
    When 用户点击“登录”按钮
    Then 系统显示错误提示：“验证码不正确”
    And 页面停留在登录页

**Scenario: 1.2.5 用户未勾选服务协议点击登录**
    Given 用户已切换到验证码登录方式
    And 用户已输入合法的手机号
    When 用户点击“发送验证码”按钮
    Then 系统向该手机号发送一条包含6位数字验证码的短信
    And “获取验证码”按钮变为不可点状态，并开始60秒倒计时
    And 用户在验证码输入框中输入了验证码
    And 用户未勾选“服务协议”复选框
    When 用户点击“登录”按钮
    Then 系统显示错误提示：“先请阅读并勾选服务协议”
    And 页面停留在登录页

**Scenario: 1.2.6 用户频繁获取验证码**
    Given 用户已切换到验证码登录方式
    And 用户在60秒内多次点击“获取验证码”按钮
    When 第二次点击“获取验证码”按钮
    Then 按钮无响应，系统不发送新的验证码
    And 倒计时继续

**Scenario: 1.2.7 用户手机号未注册点击登录**
    Given 用户已切换到验证码登录方式
    And 用户已输入未注册的手机号
    When 用户点击“发送验证码”按钮
    Then 系统向该手机号发送一条包含6位数字验证码的短信
    And “获取验证码”按钮变为不可点状态，并开始60秒倒计时
    And 用户在验证码输入框中输入了正确的验证码
    And 用户已勾选“服务协议”复选框
    When 用户点击“登录”按钮
    Then 系统显示错误提示：“该手机号未注册，请先注册”
    And 页面停留在登录页


## 2. 注册模块

### 2.1 手机号注册

#### 2.1.1 进入方式
- 在登录页面点击“免费注册”链接。
- 在首页点击“注册”按钮。

#### 2.1.2 页面元素
    - 步骤1：验证手机
        - **手机号输入框**：仅支持输入手机号码。
        - **“发送验证码”按钮**：点击后向输入的手机号发送短信验证码。
        - **短信验证码输入框**：用于输入收到的6位数字验证码。
        - **“下一步，设置密码”按钮**：点击后提交手机号和验证码进行注册。
    - 步骤2：设置密码
        - **手机号显示栏** ：显示用户已输入的手机号。前三个数字显示，中间四个数字用星号代替，后四个数字显示。
        - **密码输入框**：提示设置8-20位字母、数字和符号组合的密码。
        - **密码强度提示**：实时显示密码的强度，三个并列的矩形 “弱”、“中”、“强”。当密码为输入或不符合要求时，三个矩形均为灰色。当密码符合要求时，根据密码复杂度橙色矩形亮起。当密码强度为“弱”时，只有”弱“矩形亮起；当密码强度为“中”时，”弱“和”中“矩形均亮起；当密码强度为“强”时，三个矩形均亮起。
        - **确认密码输入框**：要求用户再次输入密码以确认。
        - **密码可视化切换按钮**：点击后切换密码输入框的显示状态，显示为明文或密码，默认为密码，用“.”代表字符。
        - **“完成”按钮**：点击后完成注册。
        - **“”<返回上一步“按钮：点击后返回步骤1

---

#### **场景描述 (Gherkin)**

**Scenario: 2.1.3 用户使用有效的手机号和验证码成功进入设置密码步骤2**
    Given 用户已打开注册页面，进入步骤1
    And 用户输入了合法的手机号
    And 用户点击“发送验证码”并收到了验证码
    And 用户输入了正确的验证码
    When 用户点击“下一步，设置密码”按钮
    Then 系统验证所有信息有效
    And 跳转至步骤2，设置密码

**Scenario: 2.1.4 用户输入不合法的手机号**
    Given 用户已打开注册页面，进入步骤1
    And 用户输入了一个不合法的手机号，如123
    When 用户点击“发送验证码”按钮
    Then 验证码输入框和登录按钮中间弹出错误提示：手机号格式不正确，请重新输入，手机号输入栏变成黄色
    And 页面停留在注册页

**Scenario: 2.1.5 用户输入合法的手机号**
    Given 用户已打开注册页面，进入步骤1
    And 用户输入了一个合法的手机号（包含已注册手机号，不需要检查是否已注册）
    When 用户点击“发送验证码”按钮
    Then 系统向该手机号发送一条包含6位数字验证码的短信
    And “获取验证码”按钮变为不可点状态，并开始60秒倒计时

**Scenario: 2.1.6 用户输入错误的验证码**
    Given 用户已填写完手机号和验证码
    And 用户输入了错误的验证码，如123456
    When 用户点击“下一步，设置密码”按钮
    Then 系统在验证码输入框下方显示错误提示：“验证码错误”
    And 页面停留在注册页

**Scenario: 2.1.7 用户输入的两次密码不一致**
    Given 用户已填写完手机号和验证码，进入步骤2
    And 用户输入了不合法的密码（不是8-20位字母、数字和符号组合）
    Then 密码输入栏显示错误提示：“密码需为8-20位字母、数字和符号的组合”
    And “完成”按钮为不可点击状态

**Scenario: 2.1.8 用户在第一个密码输入栏中输入合法密码**
    Given 用户已填写完手机号和验证码，进入步骤2
    And 用户在第一个密码输入栏中输入了合法密码（8-20位字母、数字和符号组合）
    Then 密码强度提示栏根据密码强度显示橙色矩形，当密码强度为“弱”时，只有”弱“矩形亮起；当密码强度为“中”时，”弱“和”中“矩形均亮起；当密码强度为“强”时，三个矩形均亮起。

**Scenario: 2.1.9 用户在第二个密码输入栏中输入与第一个密码输入栏中输入的密码不一致的密码**
    Given 用户已填写完手机号和验证码，进入步骤2
    And 用户在第一个密码输入栏中输入了合法密码（8-20位字母、数字和符号组合）
    And 用户在第二个密码输入栏中输入了与第一个密码输入栏中输入的密码不一致的密码
    Then 密码输入栏显示错误提示：“两次输入密码不一致”
    And “完成”按钮为不可点击状态

**Scenario: 2.1.10 用户点击密码可视化切换按钮**
    Given 用户已填写完手机号和验证码，进入步骤2
    And 用户在第一个或第二个密码输入栏中输入了任意密码
    When 用户点击某个输入栏对应的密码可视化切换按钮
    Then 该密码输入框的显示状态切换为明文或密码，用“.”代表字符

**Scenario: 2.1.11 用户在未输入任何信息时点击注册**
    Given 用户已填写完手机号和验证码，进入步骤2
    And 所有输入框均为空
    When 用户点击“注册”按钮
    Then 系统在第一个密码框下方显示错误提示：“请设置登录密码”
    And 注册失败，页面停留在注册页

**Scenario: 2.1.12 用户在未输入确认密码时点击注册**
    Given 用户已填写完手机号和验证码，进入步骤2
    And 用户在第一个密码输入栏中输入了合法密码（8-20位字母、数字和符号组合）
    And 用户在第二个密码输入栏中未输入任何内容
    When 用户点击“注册”按钮
    Then 系统在第二个密码输入框下方显示错误提示：“请再次输入密码”
    And 注册失败，页面停留在注册页

**Scenario: 2.1.13 用户两次输入相同的合法密码**
    Given 用户已填写完手机号和验证码，进入步骤2
    And 用户在第一个密码输入栏中输入了合法密码（8-20位字母、数字和符号组合）
    And 用户在第二个密码输入栏中输入了与第一个密码输入栏中输入的密码相同的密码
    Then 密码强度提示栏根据密码强度显示橙色矩形，当密码强度为“弱”时，只有”弱“矩形亮起；当密码强度为“中”时，”弱“和”中“矩形均亮起；当密码强度为“强”时，三个矩形均亮起。
    And “完成”按钮为可点击状态
    When 用户点击“完成”按钮
    Then 系统注册用户，跳转至登录页

## 3. 机票订购模块（国内）

### 3.1 机票首页搜索卡（国内）

#### 3.1.1 进入方式
- 用户登录成功后，从首页导航点击“机票”进入国内机票频道。
- 未登录状态下不允许浏览和搜索。

#### 3.1.2 页面元素
- **搜索类型切换**：Tab，包含“单程/往返/多程”。默认“单程”。
- **出发地输入框**：支持中文/拼音输入联想城市/机场；支持清空；支持常用/历史记录。
- **目的地输入框**：同出发地；支持与出发地交换功能。
- **交换按钮**：用于交换出发地与目的地。
- **出发日期选择器**：不可选择过去日期，支持节假日标识与快捷选择。
- **返程日期选择器**：仅在“往返”模式显示；需晚于去程；支持快速清除。
- **人数与舱位选择器**：成人/儿童/婴儿数量选择；舱位（经济/超经/公务/头等）。
- **直飞筛选快捷**：勾选后仅搜索直飞航班。
- **“搜索”按钮**：提交搜索条件，跳转至搜索结果页。
- **最近搜索提示**：展示最近搜索，支持一键填充与清除。
- **服务协议与隐私链接**：页脚展示。

#### **场景描述 (Gherkin)**

**Scenario: 3.1.3 单程有效条件搜索成功**
    Given 用户在国内机票首页搜索卡
    And 搜索类型为“单程”
    And 出发地选择“上海(SHA)”
    And 目的地选择“北京(BJS)”
    And 出发日期选择为未来日期
    When 用户点击“搜索”按钮
    Then 系统跳转至搜索结果页并展示可售航班列表
    And URL包含查询参数以便刷新与分享

**Scenario: 3.1.4 出发地输入异常（无匹配城市/机场）**
    Given 用户在出发地输入框输入“XYZ”
    When 用户点击“搜索”按钮
    Then 出发地输入框下方提示“未找到匹配城市/机场”
    And “搜索”按钮保持不可点击状态

**Scenario: 3.1.5 状态异常：选择过去日期**
    Given 出发日期选择为今天之前的日期
    When 用户点击“搜索”按钮
    Then 日期控件提示“不可选择过去日期”
    And 自动重置为最近可选日期

**Scenario: 3.1.6 系统异常：城市联想接口超时**
    Given 用户在输入框中输入“上”
    And 城市联想接口响应超时
    When 超过3秒未返回候选
    Then 显示“网络异常，请稍后重试”
    And 输入仍可继续，允许手动提交

**Scenario: 3.1.7 往返校验：返程早于去程**
    Given 搜索类型为“往返”
    And 去程日期为2025-12-10
    And 返程日期为2025-12-09
    When 用户点击“搜索”按钮
    Then 返程日期控件提示“返程需晚于去程”
    And 阻止搜索提交

**Scenario: 3.1.8 多程校验：至少两段**
    Given 搜索类型为“多程”
    And 用户仅填写第一段行程
    When 用户点击“搜索”按钮
    Then 页面提示“请至少填写两段行程”
    And 阻止搜索提交

**Scenario: 3.1.9 未登录状态点击搜索**
    Given 用户未登录
    When 用户在搜索卡完成合法输入后点击“搜索”按钮
    Then 系统允许进入结果页
    And 预订阶段再进行登录校验

### 3.2 搜索结果页（国内）

#### 3.2.1 进入方式
- 从首页搜索卡提交合法条件跳转进入。
- 通过携带参数的URL直接进入搜索结果页。

#### 3.2.2 页面元素
- **条件汇总条**：出发地、目的地、日期、人数与舱位；支持一键修改与返回搜索。
- **快速筛选**：直飞/中转、起飞时段、航空公司、机场、价格区间、准点率、票规类型、退改政策友好度。
- **排序**：推荐、价格低到高、起飞时间早到晚、耗时短到长。
- **航班卡片**：
    - 航空公司与航班号、机型；
    - 起飞/到达机场与航站楼、时间、总耗时；
    - 准点率、餐食、是否可退改标识；
    - 行李额图标或文案（手提/托运）；
    - 价格与舱位库存，多个套餐/票规（如“特价”“可退改”“含行李”）；
    - “预订”按钮与“详情”入口/浮层。
- **无结果占位**：展示“暂无符合条件航班”，提供改搜入口。
- **登录提示条**：未登录时顶部提示，点击可登录。

#### **场景描述 (Gherkin)**

**Scenario: 3.2.3 正常选择并进入预订**
    Given 结果页展示至少一条可售航班
    And 用户选择某航班的“可退改”经济舱套餐
    When 用户点击“预订”按钮
    Then 系统跳转至订单填写页并携带所选航班与票规信息

**Scenario: 3.2.4 输入异常：筛选条件导致无结果**
    Given 用户勾选“直飞”
    And 设置价格区间为“¥100以下”
    When 系统计算筛选结果
    Then 显示“暂无符合条件的航班”
    And 提供“清空筛选/扩大条件”入口

**Scenario: 3.2.5 状态异常：库存已售罄**
    Given 某套餐展示“仅剩1张”
    And 用户点击“预订”按钮
    When 系统进行实时库存校验
    Then 若库存为0显示提示“刚刚售罄，请选择其他套餐”
    And 保持在结果页不跳转

**Scenario: 3.2.6 状态异常：价格变动**
    Given 用户浏览某航班价格为“¥500”
    When 用户停留超过5分钟后点击“预订”按钮
    Then 系统校验最新价格
    And 显示价格变更提示并要求用户确认
    And 用户确认后进入订单页

**Scenario: 3.2.7 系统异常：结果列表接口失败**
    Given 结果页首次加载
    When 航班列表接口返回错误
    Then 显示错误占位“服务暂不可用”
    And 提供“重试”按钮与“返回搜索”入口

**Scenario: 3.2.8 未登录点击预订触发登录**
    Given 用户未登录
    When 用户在结果页点击“预订”按钮
    Then 系统跳转至登录页
    And 登录成功后自动回跳至原结果页并继续预订流程

### 3.3 航班详情浮层/页

#### 3.3.1 进入方式
- 在结果页点击“详情”或航班卡片的详情入口打开。

#### 3.3.2 页面元素
- **航段信息**：起降机场、时间、经停/中转信息、机型、航站楼。
- **服务信息**：餐食、Wi‑Fi、行李额（手提/托运）。
- **票规说明**：退改签规则、改签手续费、是否可签转。
- **价格明细**：基础票价、税费、附加服务明细。
- **操作**：关闭、从详情直接“预订”。

#### **场景描述 (Gherkin)**

**Scenario: 3.3.3 查看退改签规则并返回**
    Given 已打开航班详情页/浮层
    When 用户展开“退改签规则”
    Then 展示各舱位对应的退改费用与限制
    And 用户点击“关闭”返回结果页

**Scenario: 3.3.4 状态异常：详情数据与卡片不一致**
    Given 结果页卡片展示行李额“20kg”
    When 详情接口返回“15kg”
    Then 在详情页显式显示最新政策并标注“以最新数据为准”
    And 返回结果页后卡片同步刷新

**Scenario: 3.3.5 系统异常：详情接口超时**
    Given 用户点击“详情”
    When 超过3秒未返回
    Then 显示加载失败占位与“重试”按钮
    And 支持返回结果页

### 3.4 订单填写页（乘机人与联系人）

#### 3.4.1 进入方式
- 在结果页或详情页点击“预订”后跳转进入。
- 未登录用户会先跳转登录，登录后回跳此页。

#### 3.4.2 页面元素
- **乘机人信息列表**：
    - 添加乘机人按钮，支持选择“常用乘机人”；
    - 姓名（中文/拼音）、证件类型（身份证/护照/回乡证等）、证件号；
    - 出生日期（儿童/婴儿必填，自动校验年龄范围）；
    - 乘机人类型选择：成人/儿童/婴儿。
- **联系人信息**：
    - 手机号输入框（用于接收短信通知）；
    - 邮箱输入框（可选，用于行程单/电子票发送）。
- **航班与价格摘要**：航班号、起降时间、票价、税费、附加服务。
- **附加服务**：行李额升级、选座（如适配）、延误险/取消险、值机提醒。
- **发票选项**：发票类型与抬头、邮寄/电子发票。
- **协议与隐私**：同意服务协议复选框，默认未勾选。
- **操作按钮**：“提交订单”。

#### **场景描述 (Gherkin)**

**Scenario: 3.4.3 正常填写并提交订单**
    Given 至少添加1名成人乘机人
    And 联系人手机号合法
    And 勾选“同意服务协议”
    When 用户点击“提交订单”按钮
    Then 系统校验库存与票规
    And 创建订单并跳转至支付页

**Scenario: 3.4.4 输入异常：证件号格式错误**
    Given 用户输入身份证号“123”
    When 点击“提交订单”按钮
    Then 在证件号下方提示“证件号码格式不正确”
    And 阻止提交

**Scenario: 3.4.5 输入异常：儿童年龄不在范围**
    Given 添加乘机人类型为“儿童”
    And 出生日期计算年龄为15岁
    When 点击“提交订单”按钮
    Then 提示“儿童年龄需为2‑12岁”
    And 阻止提交

**Scenario: 3.4.6 状态异常：库存变化**
    Given 订单页停留超过10分钟
    When 用户点击“提交订单”按钮
    Then 实时校验库存不足提示“库存不足，请返回重新选择”
    And 提供“返回结果页”入口

**Scenario: 3.4.7 状态异常：价格调整**
    Given 票价在订单页显示为“¥500”
    When 校验价格返回“¥520”
    Then 弹窗提示价格变更并要求确认
    And 用户确认后继续创建订单

**Scenario: 3.4.8 系统异常：创建订单失败**
    Given 所有信息合法
    When 服务端创建订单接口返回错误
    Then 显示“服务暂不可用，请稍后重试”
    And 保持在订单页且保留用户填写内容

**Scenario: 3.4.9 未登录提交触发登录**
    Given 用户未登录
    When 用户在订单页点击“提交订单”按钮
    Then 跳转登录页
    And 登录成功后回跳订单页并保留填写信息

### 3.5 支付页

#### 3.5.1 进入方式
- 订单创建成功后跳转。

#### 3.5.2 页面元素
- **支付金额与订单号**：清晰展示应付总额与订单编号。
- **倒计时提示**：显示剩余支付时间（如15分钟）。
- **支付方式选择**：微信支付、支付宝、银行卡快捷、银联云闪付等。
- **优惠券/立减**：支持选择或输入优惠券，展示抵扣金额。
- **操作**：确认支付、返回订单详情。

#### **场景描述 (Gherkin)**

**Scenario: 3.5.3 正常支付成功**
    Given 支付方式选择为“支付宝”
    When 用户点击“去支付”并在第三方完成支付
    Then 系统回调标记订单为“已支付”
    And 跳转至“出票中/已出票”状态页

**Scenario: 3.5.4 状态异常：支付超时**
    Given 倒计时为0
    When 用户点击“去支付”
    Then 提示“支付超时，请重新下单或刷新订单”
    And 提供返回订单详情入口

**Scenario: 3.5.5 系统异常：支付回调失败**
    Given 用户在第三方完成支付
    When 系统未及时收到回调
    Then 展示“支付状态确认中”
    And 提供“刷新状态/联系客服”入口

**Scenario: 3.5.6 支付取消**
    Given 用户在第三方页面取消支付
    When 返回站内
    Then 显示“支付未完成”
    And 保留订单为待支付状态并支持再次发起

### 3.6 出票与确认页

#### 3.6.1 进入方式
- 支付完成后自动跳转或在订单详情中查看。

#### 3.6.2 页面元素
- **订单状态**：出票中/已出票/出票失败。
- **电子客票号**：展示票号与出票时间。
- **行程信息**：航班、乘机人、行李额、票规摘要。
- **售后入口**：退改申请、值机提醒、客服联系方式。
- **下载/发送**：电子行程单下载或发送至邮箱。

#### **场景描述 (Gherkin)**

**Scenario: 3.6.3 正常出票完成**
    Given 已完成支付
    When 系统完成出票
    Then 展示电子客票号与行程详情
    And 提供“退改申请”入口

**Scenario: 3.6.4 状态异常：出票失败**
    Given 已完成支付
    When 出票失败
    Then 展示失败原因与退款说明
    And 支持客服渠道

**Scenario: 3.6.5 系统异常：状态查询失败**
    Given 用户打开订单确认页
    When 状态接口失败
    Then 显示错误占位与“重试”按钮

### 3.7 订单列表与详情（售后入口）

#### 3.7.1 进入方式
- 登录后进入个人中心“我的订单”。

#### 3.7.2 页面元素
- **订单列表卡片**：行程、金额、状态、下单时间、操作入口（查看详情/再次预订）。
- **订单详情页**：乘机人信息、票规、支付与出票状态、售后申请入口。

#### **场景描述 (Gherkin)**

**Scenario: 3.7.3 查看订单详情**
    Given 用户已登录
    When 点击某订单“查看详情”
    Then 展示订单全部信息
    And 提供“退票/改签”入口

**Scenario: 3.7.4 输入异常：退票原因未选择**
    Given 用户在退票申请表单
    When 未选择退票原因就提交
    Then 提示“请选择退票原因”
    And 阻止提交

**Scenario: 3.7.5 状态异常：不可退改票规**
    Given 票规为“不可退改”
    When 用户点击“退票”
    Then 提示“该套餐不可退改”
    And 引导联系客服

**Scenario: 3.7.6 系统异常：订单详情加载失败**
    Given 用户进入订单详情页
    When 接口错误
    Then 显示“加载失败”
    And 支持重试
